<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Narrative-Driven Market Timeline</title>
  <meta name="description" content="Interactive narrative overlay that blends historic events, macro indicators, and market performance on a synchronized timeline." />
  <meta property="og:title" content="Narrative-Driven Market Timeline" />
  <meta property="og:description" content="Historic events, macro indicators, and market assets connected on a synchronized timeline." />
  <meta property="og:type" content="website" />
  <meta property="og:url" content="https://example.com" />
  <meta property="og:image" content="https://dummyimage.com/1200x630/1f2933/f8fafc&text=Narrative+Timeline" />
  <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><rect width='100' height='100' rx='16' fill='%230f172a'/><path d='M22 72L40 36l18 20 20-40' fill='none' stroke='%23facc15' stroke-width='10' stroke-linecap='round' stroke-linejoin='round'/></svg>" />
  <link rel="preconnect" href="https://cdn.jsdelivr.net" crossorigin />
  <link rel="preconnect" href="https://cdnjs.cloudflare.com" crossorigin />
  <script>
    window.tailwind_config = {
      theme: {
        extend: {
          fontFamily: {
            sans: ['"Inter Variable"', 'system-ui', 'sans-serif'],
          },
          colors: {
            accent: {
              DEFAULT: '#facc15',
              dark: '#fbbf24',
            },
          },
        },
      },
    };
  </script>
  <script src="https://cdn.tailwindcss.com?plugins=forms,typography"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/echarts/5.5.0/echarts.min.js" integrity="sha512-KYkd2JtOQhFPP03Spw2fscdKN0tJFMCq6gWKaolSVn1sRD2Gdj0tC1ymjqUAw2L8ZdpQbTCDWGBN7QFY6ae0Hw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
  <link rel="stylesheet" href="css/styles.css" />
</head>
<body id="top" class="bg-surface text-foreground min-h-screen flex flex-col" data-theme-mode="auto">
  <header class="sticky top-0 z-40 backdrop-blur bg-surface/90 border-b border-border">
    <div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="flex items-center justify-between py-4">
        <div class="flex items-center gap-3">
          <span class="inline-flex h-10 w-10 items-center justify-center rounded-xl bg-accent/20 text-accent">
            <svg class="h-6 w-6" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
              <path d="M4 18L10 6l5 7 5-10" stroke-linecap="round" stroke-linejoin="round"></path>
            </svg>
          </span>
          <div>
            <h1 class="text-lg sm:text-xl font-semibold tracking-tight">Narrative-Driven Market Timeline</h1>
            <p class="text-xs sm:text-sm text-muted">Historic catalysts aligned with macro and market momentum.</p>
          </div>
        </div>
        <nav class="hidden md:flex items-center gap-4 text-sm font-medium">
          <a class="hover:text-accent focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-accent rounded" href="#about">About</a>
          <a class="hover:text-accent focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-accent rounded" href="https://github.com/vic4code/codex-demo-finance" target="_blank" rel="noopener">GitHub</a>
        </nav>
        <div class="flex items-center gap-3">
          <button id="controls-toggle" class="md:hidden inline-flex items-center gap-2 rounded-lg border border-border px-3 py-2 text-sm font-medium text-foreground hover:bg-muted focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-accent" aria-expanded="false" aria-controls="control-panel">
            <span>Filters</span>
            <svg class="h-4 w-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
              <path d="M4 7h16M7 12h10M10 17h4" stroke-linecap="round"></path>
            </svg>
          </button>
          <button id="theme-toggle" class="inline-flex items-center justify-center rounded-lg border border-border p-2 text-sm font-medium text-foreground hover:bg-muted focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-accent" type="button" aria-label="Toggle color theme">
            <span class="sr-only">Toggle theme</span>
            <svg id="theme-icon" class="h-5 w-5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" aria-hidden="true">
              <circle cx="12" cy="12" r="5"></circle>
              <path d="M12 1v2m0 18v2m11-11h-2M3 12H1m16.95 6.95-1.414-1.414M6.464 6.464 5.05 5.05m12.728 0-1.414 1.414M6.464 17.536 5.05 18.95" stroke-linecap="round"></path>
            </svg>
          </button>
        </div>
      </div>
    </div>
  </header>
  <main class="flex-1">
    <section class="border-b border-border bg-surface-strong">
      <div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-12 md:py-16">
        <div class="grid gap-8 md:grid-cols-[minmax(0,1fr),320px]">
          <div>
            <p class="text-sm uppercase tracking-[0.2em] text-muted mb-4">Narrative Intelligence</p>
            <h2 class="text-3xl sm:text-4xl md:text-5xl font-semibold leading-tight mb-6">Connect historic catalysts with macro stress and market positioning.</h2>
            <p class="text-base md:text-lg text-muted max-w-2xl">Explore a synchronized triple-layer timeline that overlays curated events, high-frequency macro indicators, and multi-asset benchmarks. Zoom, filter, and annotate the storyline to surface cause-effect dynamics.</p>
            <div class="mt-8 flex flex-wrap items-center gap-3">
              <a class="inline-flex items-center gap-2 rounded-full bg-foreground text-surface px-4 py-2 text-sm font-semibold hover:bg-accent hover:text-surface transition" href="#visualization">View Visualization</a>
              <a class="inline-flex items-center gap-2 rounded-full border border-border px-4 py-2 text-sm font-semibold text-foreground hover:border-accent" href="https://github.com/vic4code/codex-demo-finance" target="_blank" rel="noopener">Explore Source</a>
            </div>
          </div>
          <aside class="hidden md:block">
            <div class="relative overflow-hidden rounded-2xl border border-border bg-surface shadow-lg">
              <div class="absolute inset-0 bg-gradient-to-br from-accent/20 via-transparent to-muted"></div>
              <div class="relative p-6">
                <h3 class="text-lg font-semibold mb-2">Design philosophy</h3>
                <p class="text-sm text-muted">Narratives, macro, and markets rarely move in isolation. This dashboard aligns three lenses—events, macro stress, and multi-asset performance—to support daily storytelling and risk briefings.</p>
                <ul class="mt-4 space-y-2 text-sm text-muted">
                  <li class="flex items-start gap-2"><span class="mt-1 h-2 w-2 rounded-full bg-accent"></span><span>Auto-updated via GitHub Actions every Asia/Taipei morning.</span></li>
                  <li class="flex items-start gap-2"><span class="mt-1 h-2 w-2 rounded-full bg-accent"></span><span>Graceful offline fallback with bundled sample datasets.</span></li>
                  <li class="flex items-start gap-2"><span class="mt-1 h-2 w-2 rounded-full bg-accent"></span><span>Optimized for high-contrast, low-latency multi-device usage.</span></li>
                </ul>
              </div>
            </div>
          </aside>
        </div>
      </div>
    </section>

    <section id="visualization" class="relative">
      <div class="md:hidden" id="mobile-panel">
        <div id="control-panel" class="fixed inset-y-0 left-0 z-50 w-80 max-w-full -translate-x-full transform bg-surface border-r border-border shadow-xl transition-transform duration-300 ease-out" aria-hidden="true">
          <div class="flex items-center justify-between border-b border-border px-4 py-4">
            <h3 class="text-base font-semibold">Filters</h3>
            <button id="controls-close" class="rounded-lg border border-border p-2 hover:bg-muted focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-accent" aria-label="Close filters">
              <svg class="h-4 w-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="m6 6 12 12M6 18 18 6" stroke-linecap="round"></path></svg>
            </button>
          </div>
          <div class="h-[calc(100vh-4rem)] overflow-y-auto px-4 pb-8">
            <div class="space-y-6 pt-4" id="controls-mobile"></div>
          </div>
        </div>
        <div id="drawer-backdrop" class="fixed inset-0 z-40 hidden bg-black/30" aria-hidden="true"></div>
      </div>
      <div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-12">
        <div class="flex flex-col md:flex-row md:items-start gap-8">
          <aside class="hidden md:block md:w-72" aria-label="Visualization controls">
            <div class="sticky top-24 space-y-6" id="controls-desktop"></div>
          </aside>
          <div class="flex-1 space-y-8">
            <div id="data-status" class="hidden rounded-lg border border-accent/40 bg-accent/10 px-4 py-3 text-sm text-foreground"></div>
            <article class="space-y-10">
              <section>
                <header class="mb-4">
                  <h3 class="text-lg font-semibold">Events Layer</h3>
                  <p class="text-sm text-muted">Key narrative catalysts highlighted with smart label clustering.</p>
                </header>
                <div id="events-chart" class="chart-panel" role="img" aria-label="Timeline of curated events"></div>
              </section>
              <section>
                <header class="mb-4">
                  <h3 class="text-lg font-semibold">Macro Layer</h3>
                  <p class="text-sm text-muted">Volatility, rates, and global liquidity markers with synchronized zoom.</p>
                </header>
                <div id="macro-chart" class="chart-panel" role="img" aria-label="Macro indicators chart"></div>
              </section>
              <section>
                <header class="mb-4">
                  <h3 class="text-lg font-semibold">Markets Layer</h3>
                  <p class="text-sm text-muted">Cross-asset performance rebased to 100 for clean relative comparisons.</p>
                </header>
                <div id="markets-chart" class="chart-panel" role="img" aria-label="Market assets chart"></div>
              </section>
            </article>
          </div>
        </div>
      </div>
    </section>

    <section id="about" class="border-t border-border bg-surface-strong">
      <div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-12 md:py-16">
        <div class="grid gap-10 lg:grid-cols-2">
          <div>
            <h2 class="text-2xl md:text-3xl font-semibold mb-4">Why narrative layering matters</h2>
            <p class="text-muted text-base leading-relaxed">Markets respond to the interaction of human narratives, policy expectations, and cross-asset liquidity. This lightweight explorer centralizes the storyline by synchronizing macro stress gauges, global risk proxies, and news catalysts. Use it to brief teams, annotate turning points, or sanity-check price moves.</p>
            <p class="text-muted text-base leading-relaxed mt-4">Data refreshes daily through GitHub Actions. When live data cannot be reached, cached samples are displayed with a subtle banner. Custom events can be edited through <code>events.yaml</code>, supporting translations to English automatically.</p>
          </div>
          <div class="space-y-6">
            <div class="rounded-2xl border border-border bg-surface p-6 shadow-sm">
              <h3 class="text-lg font-semibold mb-2">Interaction highlights</h3>
              <ul class="space-y-2 text-sm text-muted">
                <li class="flex gap-2"><span class="mt-1 h-2 w-2 rounded-full bg-accent"></span><span>Synchronized zoom, shared crosshair, and smooth transitions across layers.</span></li>
                <li class="flex gap-2"><span class="mt-1 h-2 w-2 rounded-full bg-accent"></span><span>Rebase-to-100 toggle and optional logarithmic scale for regime shifts.</span></li>
                <li class="flex gap-2"><span class="mt-1 h-2 w-2 rounded-full bg-accent"></span><span>Annotation clustering prevents label collisions while preserving context.</span></li>
              </ul>
            </div>
            <div class="rounded-2xl border border-border bg-surface p-6 shadow-sm">
              <h3 class="text-lg font-semibold mb-2">Data sources</h3>
              <p class="text-sm text-muted">Market prices via Yahoo Finance. Macro series via FRED when available. Event narratives curated manually.</p>
            </div>
          </div>
        </div>
      </div>
    </section>
  </main>
  <footer class="border-t border-border bg-surface">
    <div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
      <div class="flex flex-col md:flex-row md:items-center md:justify-between gap-4 text-sm text-muted">
        <p>&copy; <span id="copyright-year"></span> Narrative-Driven Market Timeline. MIT License.</p>
        <div class="flex items-center gap-4">
          <a class="hover:text-accent" href="https://github.com/vic4code/codex-demo-finance" target="_blank" rel="noopener">GitHub</a>
          <a class="hover:text-accent" href="https://github.com/vic4code/codex-demo-finance/blob/main/README.md" target="_blank" rel="noopener">Documentation</a>
          <a class="hover:text-accent" href="#top">Back to top</a>
        </div>
      </div>
    </div>
  </footer>
  <script type="module" src="js/app.js"></script>
</body>
</html>
